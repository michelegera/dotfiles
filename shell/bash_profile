#!/usr/bin/env bash

# Don't check mail when opening terminal
unset MAILCHECK

# Add Homebrew sbin to PATH
export PATH="/usr/local/sbin:$PATH"

# Use Neovim as preferred editor
export EDITOR=nvim
export VISUAL=nvim
export VIMCONFIG=~/.config/nvim
export VIMDATA=~/.local/share/nvim

# Configure gpg-agent
gpgconf --launch gpg-agent
export SSH_AUTH_SOCKET=$HOME/.gnupg/S.gpg-agent.ssh
export GPG_TTY=$(tty)

# Source Bash autocompletion
[[ -r "/usr/local/etc/profile.d/bash_completion.sh" ]] && . "/usr/local/etc/profile.d/bash_completion.sh"

# Source Git autocompletion
[ -f ~/.git-completion.bash ] && source ~/.git-completion.bash

# Source local profile
[ -f ~/.bash_profile.local ] && source ~/.bash_profile.local

# Source Sensible Bash
[ -f ~/.sensible.bash ] && source ~/.sensible.bash

# Source .bashrc
[ -f ~/.bashrc ] && source ~/.bashrc

# Configure nvm
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"

# Configure avn
[[ -s "$HOME/.avn/bin/avn.sh" ]] && source "$HOME/.avn/bin/avn.sh"

# Configure rbenv
eval "$(rbenv init -)"

# Soruce Homebrew's completions
if type brew 2&>/dev/null; then
  for completion_file in $(brew --prefix)/etc/bash_completion.d/*; do
    source "$completion_file"
  done
fi

# Configure MySQL
export PATH="/usr/local/opt/mysql@5.7/bin:$PATH"

# Configure Python 3
export PATH="/usr/local/opt/python@3/bin:$PATH"

# Configure Go
export GOPATH="$HOME/.go"

# Load colors
eval $(gdircolors -b $HOME/.dircolors)

# Load jump
eval "$(jump shell)"

# Use Neovim instead of Vim or Vi
alias v{,i,im}='nvim'

# Enable vi mode
set -o vi

# Aliases
alias be='bundle exec'
alias cat='bat'
alias du='ncdu --color dark -rr -x --exclude .git --exclude node_modules'
alias g='git'
alias grp='grep --color -n -C 1'
alias help='tldr'
alias ll='ls -lAh'
alias ls='gls --color'
alias mux='tmuxinator'
alias ping='prettyping --nolegend'
alias top='htop'

# Use English for command line tools
export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8
export LANGUAGE=en_US.UTF-8
