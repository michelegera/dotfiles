# Use English for command line tools
export LC_ALL=en_US.UTF-8
export LANG=en_US.UTF-8
export LANGUAGE=en_US.UTF-8

# Don't check mail when opening terminal
unset MAILCHECK

# Add Homebrew sbin to PATH
export PATH="/usr/local/sbin:$PATH"

# Use Neovim as preferred editor
export EDITOR=nvim
export VISUAL=nvim
export VIMCONFIG=~/.config/nvim
export VIMDATA=~/.local/share/nvim

# Configure gpg-agent
gpgconf --launch gpg-agent
export SSH_AUTH_SOCKET=$HOME/.gnupg/S.gpg-agent.ssh
export GPG_TTY=$(tty)

# Source Bash autocompletion
[[ -r "/usr/local/etc/profile.d/bash_completion.sh" ]] && source "/usr/local/etc/profile.d/bash_completion.sh"

# Source Git autocompletion
[ -f $HOME/.git-completion.bash ] && source $HOME/.git-completion.bash

# Source aliases
[ -f $HOME/.bash_aliases ] && source $HOME/.bash_aliases

# Source local profile
[ -f $HOME/.bash_profile.local ] && source $HOME/.bash_profile.local

# Source Sensible Bash
[ -f $HOME/.sensible.bash ] && source $HOME/.sensible.bash

# Configure nvm
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"

# Configure avn
[[ -s "$HOME/.avn/bin/avn.sh" ]] && source "$HOME/.avn/bin/avn.sh"

# Configure rbenv
eval "$(rbenv init -)"

# Soruce Homebrew's completions
if type brew 2&>/dev/null; then
  for completion_file in $(brew --prefix)/etc/bash_completion.d/*; do
    source "$completion_file"
  done
fi

# Configure MariaDB
export PATH="/usr/local/opt/mariadb@10.1/bin:$PATH"

# Configure pyenv
export PATH="~/.pyenv/shims:$PATH"
if which pyenv > /dev/null; then eval "$(pyenv init -)"; fi

# Link Rubies to Homebrewâ€™s OpenSSL, since ruby-build installs a non-Homebrew
# OpenSSL for each Ruby version installed and these are never upgraded.
export RUBY_CONFIGURE_OPTS="--with-openssl-dir=$(brew --prefix openssl)"

# Load colors
eval $(gdircolors -b $HOME/.dircolors)

# Load jump
eval "$(jump shell)"

# Enable vi mode
set -o vi

# Load fzf auto-completion and key bindings, set Ayu Mirage colors
export FZF_DEFAULT_COMMAND='rg --files --follow --hidden'
export FZF_DEFAULT_OPTS=$FZF_DEFAULT_OPTS'
  --color=fg:#707a8c,bg:#1f2430,hl:#cbccc6
  --color=fg+:#cbccc6,bg+:#191e2a,hl+:#ffcc66
  --color=info:#73d0ff,prompt:#707a8c,pointer:#cbccc6
  --color=marker:#73d0ff,spinner:#73d0ff,header:#d4bfff'
[ -f $HOME/.fzf.bash ] && source $HOME/.fzf.bash

# Source prompt
eval "$(starship init bash)"

# Set up Heroku autocomplete
HEROKU_AC_BASH_SETUP_PATH=$HOME/Library/Caches/heroku/autocomplete/bash_setup && \
  test -f $HEROKU_AC_BASH_SETUP_PATH && \
  source $HEROKU_AC_BASH_SETUP_PATH;

# Utility functions
mkcdir() {
  mkdir -p -- "$1" && cd -P -- "$1"
}
